{% extends "admin_base.html" %}
{% block content %}
<h2>–î–æ–±–∞–≤–∏—Ç—å –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</h2>
<form action="/admin/add" method="post">
    <label>–ö–æ–º–ø–∞–Ω–∏—è:</label><br>
    <input name="company" required><br>

    <label>–†–æ–ª—å:</label><br>
    <input name="role" required><br>

    <label>–ù–∞—á–∞–ª–æ:</label><br>
    <input type="month" name="start" required><br>

    <label>–ö–æ–Ω–µ—Ü:</label><br>
    <input type="month" name="end" id="end_month"><br>

    <label><input type="checkbox" name="current" id="current"> –ù–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è</label><br>

    <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label><br>
    <textarea name="description" rows="4" required></textarea><br>

    <input type="submit" value="–î–æ–±–∞–≤–∏—Ç—å">
</form>

<h3>–¢–µ–∫—É—â–∏–π –æ–ø—ã—Ç</h3>
{% for exp in experiences %}
  <div class="experience-block">
    <div>
      <strong>{{ exp.company }} ({{ exp.period }})</strong><br>
      {{ exp.role }}<br>
      <p>{{ exp.description | nl2br | safe }}</p>
    </div>
    <div class="btn-group">
      <a href="/admin/edit/{{ exp.id }}" class="btn btn-secondary btn-small">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
      <a href="/admin/delete/{{ exp.id }}" class="btn btn-danger btn-small"
         onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –æ–ø—ã—Ç?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</a>
    </div>
  </div>
{% else %}
  <p>–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π</p>
{% endfor %}

<script>
    const checkbox = document.getElementById('current');
    const endField = document.getElementById('end_month');

    checkbox.addEventListener('change', () => {
        endField.disabled = checkbox.checked;
    });
</script>
{% endblock %}
